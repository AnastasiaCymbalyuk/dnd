!function(){"use strict";function e(e){const t=e.closest(".form_box").querySelector(".form_task");e.style.display="none",t.style.display="block"}function t(e){const t=document.querySelector(`form[name=${e}]`),n=t.closest(".form_box").querySelector(".link_add");t.style.display="none",n.style.display="inline"}function n(e,t){e.insertAdjacentHTML("beforeend",`\n  <div class="task" draggable="true">\n    <p class="li">${t}</p><span class="close_text">&#x2716;</span>\n  </div>\n`)}class s{constructor(){this.nameClass=["todo","in_progress","done"]}updateSave(){for(const e of this.nameClass){const t=document.querySelector(`.${e}`).querySelectorAll(".li");if(t.length>0){const n=[];for(const e of t)n.push(e.textContent);localStorage[e]=JSON.stringify(n)}else localStorage.removeItem(e)}}renderingSave(){for(const e of this.nameClass){const t=JSON.parse(localStorage[e]),s=document.querySelector(`.${e}`);for(const e of t)n(s,e)}}}class o{constructor(e,t){this.name=e,this.elem=t}addTask(){const e=document.querySelector(`.${this.name}`);this.elem.forEach((t=>{"text"===t.name&&(n(e,t.value),(new s).updateSave())})),t(this.name)}}const l=document.querySelectorAll(".link_add"),a=document.querySelectorAll(".close_task"),r=document.querySelectorAll(".form_task"),c=document.querySelectorAll(".tasks_box"),i=new s;document.addEventListener("DOMContentLoaded",(()=>{i.renderingSave()}));for(const t of l)t.addEventListener("click",(t=>{e(t.target)}));for(const e of a)e.addEventListener("click",(e=>{t(e.target.closest(".form_task").name)}));for(const e of r)e.addEventListener("submit",(e=>{e.preventDefault();const{name:t}=e.target,n=[...e.target.elements];new o(t,n).addTask(),i.updateSave()}));function d(e){const t=e.target.closest(".task"),{width:n,height:s}=t.getBoundingClientRect();t.style.position="absolute",t.style.width=`${n}px`,t.style.height=`${s}px`,t.style.zIndex=1e3;const o=e.clientX-t.getBoundingClientRect().left,l=e.clientY-t.getBoundingClientRect().top;let a;t.addEventListener("dragover",(function(e){e.preventDefault()})),t.addEventListener("drag",(function(e){t.style.left=e.pageX-o+"px",t.style.top=e.pageY-l+"px",t.hidden=!0;const n=document.elementFromPoint(e.clientX,e.clientY);t.hidden=!1,a=n.closest(".tasks_box")})),t.addEventListener("drop",(function(){a&&(a.append(this),i.updateSave())}))}function u(e){const t=e.target.closest(".task");t.style.position="relative",t.style.cursor="auto",t.style.height=null,t.style.width=null,t.style.zIndex=null,t.style.top=null,t.style.left=null}for(const e of c)e.addEventListener("click",(e=>{e.target.classList.contains("close_text")&&(e.target.closest(".task").remove(),i.updateSave())})),e.addEventListener("mouseover",(e=>{e.target.classList.contains("task")&&(e.target.querySelector(".close_text").style.display="inline")})),e.addEventListener("mouseout",(e=>{e.relatedTarget.closest(".task")||(e.target.querySelector(".close_text").style.display="none")})),e.addEventListener("dragstart",d),e.addEventListener("dragend",u)}();